<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Finance App</title>
</head>
<body>
<h2>üìä –ú–æ–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏</h2>
<button id="loadBtn">–ó–∞–≥—Ä—É–∑–∏—Ç—å –≤—Å–µ</button>
<ul id="list"></ul>

<h3>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é</h3>
<input id="name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" />
<input id="amount" placeholder="–°—É–º–º–∞" type="number" />
<button id="addBtn">–î–æ–±–∞–≤–∏—Ç—å</button>

<script>
    const API = "/api/transactions"; // üëà –Ω–µ –Ω—É–∂–Ω–æ –ø–∏—Å–∞—Ç—å localhost:8080

    // –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤—Å–µ
    document.getElementById("loadBtn").addEventListener("click", async () => {
        const res = await fetch(API);
        const data = await res.json();

        const list = document.getElementById("list");
        list.innerHTML = "";
        data.forEach(tx => {
            const li = document.createElement("li");
            li.textContent = `${tx.name}: ${tx.amount} ‚Ç∏`;
            list.appendChild(li);
        });
    });

    // –î–æ–±–∞–≤–∏—Ç—å
    document.getElementById("addBtn").addEventListener("click", async () => {
        const name = document.getElementById("name").value;
        const amount = document.getElementById("amount").value;

        await fetch(API, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ name, amount })
        });

        alert("‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ!");
    });
</script>
</body>
</html>
